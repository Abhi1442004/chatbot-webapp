{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{sendMessage}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatBox(){const[messages,setMessages]=useState([]);const[query,setQuery]=useState(\"\");const[loading,setLoading]=useState(false);const chatEndRef=useRef(null);const scrollToBottom=()=>{var _chatEndRef$current;(_chatEndRef$current=chatEndRef.current)===null||_chatEndRef$current===void 0?void 0:_chatEndRef$current.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);const handleSend=async e=>{e.preventDefault();if(!query.trim())return;const userMessage={sender:\"You\",text:query};setMessages(prev=>[...prev,userMessage]);setQuery(\"\");setLoading(true);try{const data=await sendMessage({query});const botMessage={sender:\"Bot\",text:data.response||data.reply||\"...\"};setMessages(prev=>[...prev,botMessage]);}catch(error){console.error(\"Error sending message:\",error);const botMessage={sender:\"Bot\",text:\"Error: No response from server.\"};setMessages(prev=>[...prev,botMessage]);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",padding:\"20px\",minHeight:\"100vh\",backgroundColor:\"#f5f5f5\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",maxWidth:\"600px\",backgroundColor:\"#fff\",borderRadius:\"12px\",boxShadow:\"0 10px 25px rgba(0,0,0,0.1)\",display:\"flex\",flexDirection:\"column\",height:\"80vh\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:\"20px\",overflowY:\"auto\"},children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:msg.sender===\"You\"?\"flex-end\":\"flex-start\",marginBottom:\"10px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:msg.sender===\"You\"?\"#007bff\":\"#e5e5ea\",color:msg.sender===\"You\"?\"#fff\":\"#000\",padding:\"10px 15px\",borderRadius:\"15px\",maxWidth:\"70%\",wordBreak:\"break-word\"},children:msg.text})},idx)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,style:{display:\"flex\",borderTop:\"1px solid #ccc\",padding:\"10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Type your message...\",style:{flex:1,padding:\"12px\",borderRadius:\"12px\",border:\"1px solid #ccc\",marginRight:\"10px\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{padding:\"12px 20px\",borderRadius:\"12px\",border:\"none\",backgroundColor:\"#007bff\",color:\"#fff\",fontWeight:\"bold\",cursor:\"pointer\"},children:loading?\"Sending...\":\"Send\"})]})]})});}export default ChatBox;","map":{"version":3,"names":["React","useState","useEffect","useRef","sendMessage","jsx","_jsx","jsxs","_jsxs","ChatBox","messages","setMessages","query","setQuery","loading","setLoading","chatEndRef","scrollToBottom","_chatEndRef$current","current","scrollIntoView","behavior","handleSend","e","preventDefault","trim","userMessage","sender","text","prev","data","botMessage","response","reply","error","console","style","display","justifyContent","padding","minHeight","backgroundColor","children","width","maxWidth","borderRadius","boxShadow","flexDirection","height","flex","overflowY","map","msg","idx","marginBottom","color","wordBreak","ref","onSubmit","borderTop","type","value","onChange","target","placeholder","border","marginRight","disabled","fontWeight","cursor"],"sources":["C:/Users/Tiparala/chatbot-webapp/frontend/src/components/ChatBox.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { sendMessage } from \"../api\";\r\n\r\nfunction ChatBox() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const chatEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSend = async (e) => {\r\n    e.preventDefault();\r\n    if (!query.trim()) return;\r\n\r\n    const userMessage = { sender: \"You\", text: query };\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setQuery(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const data = await sendMessage({ query });\r\n      const botMessage = { sender: \"Bot\", text: data.response || data.reply || \"...\" };\r\n      setMessages((prev) => [...prev, botMessage]);\r\n    } catch (error) {\r\n      console.error(\"Error sending message:\", error);\r\n      const botMessage = { sender: \"Bot\", text: \"Error: No response from server.\" };\r\n      setMessages((prev) => [...prev, botMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        padding: \"20px\",\r\n        minHeight: \"100vh\",\r\n        backgroundColor: \"#f5f5f5\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          width: \"100%\",\r\n          maxWidth: \"600px\",\r\n          backgroundColor: \"#fff\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 10px 25px rgba(0,0,0,0.1)\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          height: \"80vh\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            padding: \"20px\",\r\n            overflowY: \"auto\",\r\n          }}\r\n        >\r\n          {messages.map((msg, idx) => (\r\n            <div\r\n              key={idx}\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: msg.sender === \"You\" ? \"flex-end\" : \"flex-start\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  backgroundColor: msg.sender === \"You\" ? \"#007bff\" : \"#e5e5ea\",\r\n                  color: msg.sender === \"You\" ? \"#fff\" : \"#000\",\r\n                  padding: \"10px 15px\",\r\n                  borderRadius: \"15px\",\r\n                  maxWidth: \"70%\",\r\n                  wordBreak: \"break-word\",\r\n                }}\r\n              >\r\n                {msg.text}\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div ref={chatEndRef} />\r\n        </div>\r\n\r\n        <form\r\n          onSubmit={handleSend}\r\n          style={{\r\n            display: \"flex\",\r\n            borderTop: \"1px solid #ccc\",\r\n            padding: \"10px\",\r\n          }}\r\n        >\r\n          <input\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder=\"Type your message...\"\r\n            style={{\r\n              flex: 1,\r\n              padding: \"12px\",\r\n              borderRadius: \"12px\",\r\n              border: \"1px solid #ccc\",\r\n              marginRight: \"10px\",\r\n            }}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            style={{\r\n              padding: \"12px 20px\",\r\n              borderRadius: \"12px\",\r\n              border: \"none\",\r\n              backgroundColor: \"#007bff\",\r\n              color: \"#fff\",\r\n              fontWeight: \"bold\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            {loading ? \"Sending...\" : \"Send\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatBox;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}