{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{signup,login}from\"../api\";// backend functions\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginSignup=()=>{const[isLogin,setIsLogin]=useState(true);const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{if(isLogin){var _res$data,_res$data2;const res=await login({email,password});// ✅ extract token safely\nconst token=res.token||res.access_token||((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.token)||((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.access_token);if(!token)throw new Error(\"No token received from server\");localStorage.setItem(\"token\",token);alert(\"✅ Logged in successfully!\");navigate(\"/chat\");}else{await signup({email,password});alert(\"✅ Signup successful! Please login.\");setIsLogin(true);}setError(\"\");setEmail(\"\");setPassword(\"\");}catch(err){var _err$response,_err$response$data;console.error(\"Login/Signup error:\",err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||\"Something went wrong. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{style:styles.container,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.title,children:isLogin?\"Login\":\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:styles.form,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:styles.input}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:styles.input}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.button,children:isLogin?\"Login\":\"Sign Up\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:styles.error,children:error}),/*#__PURE__*/_jsxs(\"p\",{style:styles.toggleText,children:[isLogin?\"Don't have an account?\":\"Already have an account?\",\" \",/*#__PURE__*/_jsx(\"span\",{style:styles.toggleLink,onClick:()=>setIsLogin(!isLogin),children:isLogin?\"Sign Up\":\"Login\"})]})]})});};const styles={container:{height:\"100vh\",background:\"linear-gradient(135deg, #1c1f26, #2a2f3a)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},card:{backgroundColor:\"#fff\",borderRadius:\"15px\",padding:\"40px 30px\",boxShadow:\"0 8px 25px rgba(0,0,0,0.2)\",width:\"320px\",textAlign:\"center\"},title:{marginBottom:\"20px\",color:\"#222\",fontSize:\"24px\",fontWeight:\"600\"},form:{display:\"flex\",flexDirection:\"column\"},input:{marginBottom:\"15px\",padding:\"10px\",border:\"1px solid #ccc\",borderRadius:\"8px\",fontSize:\"14px\"},button:{backgroundColor:\"#4F46E5\",color:\"#fff\",padding:\"10px\",border:\"none\",borderRadius:\"8px\",fontWeight:\"600\",cursor:\"pointer\"},error:{color:\"red\",marginTop:\"10px\",fontSize:\"14px\"},toggleText:{marginTop:\"15px\",fontSize:\"14px\",color:\"#444\"},toggleLink:{color:\"#4F46E5\",fontWeight:\"600\",cursor:\"pointer\"}};export default LoginSignup;","map":{"version":3,"names":["React","useState","useNavigate","signup","login","jsx","_jsx","jsxs","_jsxs","LoginSignup","isLogin","setIsLogin","email","setEmail","password","setPassword","error","setError","navigate","handleSubmit","e","preventDefault","_res$data","_res$data2","res","token","access_token","data","Error","localStorage","setItem","alert","err","_err$response","_err$response$data","console","response","detail","message","style","styles","container","children","card","title","onSubmit","form","type","placeholder","value","onChange","target","required","input","button","toggleText","toggleLink","onClick","height","background","display","alignItems","justifyContent","backgroundColor","borderRadius","padding","boxShadow","width","textAlign","marginBottom","color","fontSize","fontWeight","flexDirection","border","cursor","marginTop"],"sources":["C:/Users/Tiparala/chatbot-webapp/frontend/src/pages/LoginSignup.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { signup, login } from \"../api\"; // backend functions\r\n\r\nconst LoginSignup = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (isLogin) {\r\n        const res = await login({ email, password });\r\n\r\n        // ✅ extract token safely\r\n        const token =\r\n          res.token || res.access_token || res.data?.token || res.data?.access_token;\r\n\r\n        if (!token) throw new Error(\"No token received from server\");\r\n\r\n        localStorage.setItem(\"token\", token);\r\n        alert(\"✅ Logged in successfully!\");\r\n        navigate(\"/chat\");\r\n      } else {\r\n        await signup({ email, password });\r\n        alert(\"✅ Signup successful! Please login.\");\r\n        setIsLogin(true);\r\n      }\r\n\r\n      setError(\"\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    } catch (err) {\r\n      console.error(\"Login/Signup error:\", err);\r\n      setError(\r\n        err.response?.data?.detail ||\r\n          err.message ||\r\n          \"Something went wrong. Please try again.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <h2 style={styles.title}>{isLogin ? \"Login\" : \"Sign Up\"}</h2>\r\n        <form onSubmit={handleSubmit} style={styles.form}>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n            style={styles.input}\r\n          />\r\n          <button type=\"submit\" style={styles.button}>\r\n            {isLogin ? \"Login\" : \"Sign Up\"}\r\n          </button>\r\n        </form>\r\n        {error && <p style={styles.error}>{error}</p>}\r\n        <p style={styles.toggleText}>\r\n          {isLogin ? \"Don't have an account?\" : \"Already have an account?\"}{\" \"}\r\n          <span\r\n            style={styles.toggleLink}\r\n            onClick={() => setIsLogin(!isLogin)}\r\n          >\r\n            {isLogin ? \"Sign Up\" : \"Login\"}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    height: \"100vh\",\r\n    background: \"linear-gradient(135deg, #1c1f26, #2a2f3a)\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: \"15px\",\r\n    padding: \"40px 30px\",\r\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.2)\",\r\n    width: \"320px\",\r\n    textAlign: \"center\",\r\n  },\r\n  title: {\r\n    marginBottom: \"20px\",\r\n    color: \"#222\",\r\n    fontSize: \"24px\",\r\n    fontWeight: \"600\",\r\n  },\r\n  form: { display: \"flex\", flexDirection: \"column\" },\r\n  input: {\r\n    marginBottom: \"15px\",\r\n    padding: \"10px\",\r\n    border: \"1px solid #ccc\",\r\n    borderRadius: \"8px\",\r\n    fontSize: \"14px\",\r\n  },\r\n  button: {\r\n    backgroundColor: \"#4F46E5\",\r\n    color: \"#fff\",\r\n    padding: \"10px\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    fontWeight: \"600\",\r\n    cursor: \"pointer\",\r\n  },\r\n  error: { color: \"red\", marginTop: \"10px\", fontSize: \"14px\" },\r\n  toggleText: { marginTop: \"15px\", fontSize: \"14px\", color: \"#444\" },\r\n  toggleLink: { color: \"#4F46E5\", fontWeight: \"600\", cursor: \"pointer\" },\r\n};\r\n\r\nexport default LoginSignup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}